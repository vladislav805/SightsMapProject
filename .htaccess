RewriteEngine On

RewriteRule ^map/?$ route.php?r=map [L,QSA]
RewriteRule ^place/(\d+|random|search|add|edit)(-([A-Za-z0-9_.-]+))?$ route.php?r=place&id=$1&name=$3 [L,QSA]
RewriteRule ^marks$ route.php?r=marks [L,QSA]
RewriteRule ^user/(\d+|[A-Za-z0-9_]{2,16})(/(places|report))?$ route.php?r=user&sub=$3&id=$1 [L,QSA]
RewriteRule ^login$ route.php?r=login [L,QSA]
RewriteRule ^feed$ route.php?r=feed [L,QSA]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule $ route.php?r=index [L,QSA]